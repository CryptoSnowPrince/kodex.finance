"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5634],{47546:function(e,n){n.Z={src:"/_next/static/media/fallbacksvg.1ef2fbce.svg",height:30,width:30}},88794:function(e,n){n.Z={src:"/_next/static/media/info-grey.0d5a25bd.svg",height:10,width:10}},61115:function(e,n){n.Z={src:"/_next/static/media/ratesrefresh.726b7bb5.svg",height:12,width:12}},60291:function(e,n,t){var r=t(85893),a=t(81870),o=t(3556),s=t(25675),i=t.n(s),l=t(61115),c=t(43019),u=t(67294),d=t(70794),m=t(34211),p=t(26038),f=t(34362),x=t(62210);n.Z=function(e){var n,t,s=(0,x.CG)((function(e){return e.config.tokens})),h=(0,u.useState)(!1),k=h[0],b=h[1],v=function(){e.setShow(!1)};return e.show?(0,r.jsx)(o.H,{onhide:v,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"cursor-pointer",onClick:v,children:(0,r.jsx)(i(),{alt:"alt",src:m.Z})}),(0,r.jsx)("div",{className:"mx-2 text-white font-title3",children:"Confirm Pool"})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"border bg-muted-100/[0.1] rounded-2xl border-text-800 p-3 flex content-center justify-center",children:[(0,r.jsxs)("div",{className:"border rounded-xl border-text-800/[0.5] bg-muted-400 p-3 h-[50px] justify-center flex",children:[(0,r.jsx)("span",{className:"h-[26px] w-[26px]",children:(0,r.jsx)("img",{alt:"alt",src:e.tokenIn.image?p.N[e.tokenIn.name]?p.N[e.tokenIn.name].src:(null===(n=s[e.tokenIn.name.toString()])||void 0===n?void 0:n.iconUrl)?s[e.tokenIn.name.toString()].iconUrl:"/assets/Tokens/fallback.png":"/assets/icon/emptyIcon.svg",height:"26px",width:"26px",onError:f.hj})}),(0,r.jsx)("span",{className:"font-title3 ml-2",children:(0,r.jsx)("span",{children:(0,f.Xf)(e.tokenIn.name)})})]}),(0,r.jsx)("div",{className:"ml-auto items-center flex font-medium2",children:Number(e.firstTokenAmount)>0?new d.O(e.firstTokenAmount).isLessThan(.01)?"<0.01":(0,f.ZP)(new d.O(e.firstTokenAmount)):"0"})]}),(0,r.jsx)("div",{className:"flex justify-center -mt-[8px]",children:(0,r.jsx)(i(),{alt:"alt",src:c.Z,width:"24px",height:"24px"})}),(0,r.jsxs)("div",{className:"border -mt-[7px] bg-muted-100/[0.1] rounded-2xl border-text-800 p-3 flex content-center justify-center",children:[(0,r.jsxs)("div",{className:"border rounded-xl border-text-800/[0.5] bg-muted-400 p-3 h-[50px] justify-center flex",children:[(0,r.jsx)("span",{className:"h-[26px] w-[26px]",children:(0,r.jsx)("img",{alt:"alt",src:e.tokenOut.image?p.N[e.tokenOut.name]?p.N[e.tokenOut.name].src:(null===(t=s[e.tokenOut.name.toString()])||void 0===t?void 0:t.iconUrl)?s[e.tokenOut.name.toString()].iconUrl:"/assets/Tokens/fallback.png":"/assets/icon/emptyIcon.svg",height:"26px",width:"26px",onError:f.hj})}),(0,r.jsx)("span",{className:"font-title3 ml-2",children:(0,r.jsx)("span",{children:(0,f.Xf)(e.tokenOut.name)})})]}),(0,r.jsx)("div",{className:"ml-auto items-center flex font-medium2",children:Number(e.secondTokenAmount)>0?new d.O(e.secondTokenAmount).isLessThan(.01)?"<0.01":(0,f.ZP)(new d.O(e.secondTokenAmount)):"0"})]}),(0,r.jsx)("div",{className:"h-12 mt-3 px-4 pt-[13px] pb-[15px] rounded-2xl bg-muted-600 border border-primary-500/[0.2] items-center flex ",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"ml-[9.25px] font-bold3 lg:font-text-bold mr-[7px]",children:["1"," ",k?(0,f.Xf)(e.tokenOut.name):(0,f.Xf)(e.tokenIn.name)," ","=",k?"".concat((0,f.Zy)(new d.O(e.firstTokenAmount).dividedBy(new d.O(e.secondTokenAmount)))," ").concat((0,f.Xf)(e.tokenIn.name)):" ".concat((0,f.Zy)(new d.O(e.secondTokenAmount).dividedBy(new d.O(e.firstTokenAmount)))," \n                            ").concat((0,f.Xf)(e.tokenOut.name))]}),(0,r.jsx)("span",{className:"relative top-px cursor-pointer ",children:(0,r.jsx)(i(),{alt:"alt",src:l.Z,onClick:function(e){return function(e){e.stopPropagation(),b(!k)}(e)}})})]}),(0,r.jsx)("div",{className:"ml-auto bg-primary-red/10 px-3 cursor-pointer text-primary-white hover:opacity-90 font-body2 rounded-lg flex items-center h-[28px] justify-center",children:e.pair})]})}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(a.Z,{color:"primary",width:"w-full",onClick:e.onClick,children:"Confirm"})})]})]})}):null}},29290:function(e,n,t){t.d(n,{sO:function(){return S}});var r=t(34051),a=t.n(r),o=t(85893),s=t(25675),i=t.n(s),l=t(67294),c=t(56474),u=t(63960),d=t(43019),m=t(70794),p=t(81870),f=t(91525),x=t(62210),h=t(16110),k=t(8292),b=t(60979),v=t(15717),w=t(61831),y=t(34362),O=t(26038),N=t(66850),g=t(63139);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n,t,r,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void t(c)}i.done?n(l):Promise.resolve(l).then(r,a)}function I(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){T(o,r,a,s,i,"next",e)}function i(e){T(o,r,a,s,i,"throw",e)}s(void 0)}))}}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],s=!0,i=!1;try{for(t=t.call(e);!(s=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);s=!0);}catch(l){i=!0,a=l}finally{try{s||null==t.return||t.return()}finally{if(i)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S={VOLATILE:"Volatile pair",STABLE:"Stable pair",GENERAL:"V3 pair"};n.ZP=function(e){var n,t,r,s,j,T,P,C,B,L,Z,E,F,M,U,_,R,K,X=e.isExist,Y=e.setIsExist,q=(0,x.CG)((function(e){return e.tokenPrice.tokenPrice})),Q=(0,x.CG)((function(e){return e.config.AMMs})),z=(0,x.CG)((function(e){return e.config.tokens})),G=(0,x.CG)((function(e){return e.wallet.address})),H=(0,h.I0)(),V=function(){return H((0,k.A$)())},W=A(l.useState(w.$_.Liquidity),2),$=W[0],D=W[1],J=(0,l.useState)(!1),ee=J[0],ne=J[1];(0,l.useEffect)((function(){var n=function(){var n=I(a().mark((function n(){var t,r,o,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Object.prototype.hasOwnProperty.call(e.tokenIn,"symbol")||!Object.prototype.hasOwnProperty.call(e.tokenOut,"symbol")){n.next=19;break}return n.next=3,(0,b.iY)(e.tokenInOp,e.tokenOutOp,e.feeTier);case 3:if(t=n.sent,console.log("[prince]: getPoolAddress",t),"false"===t){n.next=18;break}return Y(!0),n.next=10,(0,b.mJ)(t,e.tokenInOp,e.tokenOutOp);case 10:o=n.sent,s=parseFloat(o),e.setCurPrice(s),e.setUserMinPrice(s/2),e.setUserMaxPrice(2*s),void 0!==(null===(r=Q[t])||void 0===r?void 0:r.gauge)?ne(!0):ne(!1),n.next=19;break;case 18:Y(!1),ne(!1);case 19:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e.tokenIn,e.tokenOut,e.feeTier]);var te=(0,l.useMemo)((function(){var n,t;return G?!e.tokenIn.name||!e.tokenOut.name||!e.feeTier||Number(e.firstTokenAmount)<=0||Number(e.secondTokenAmount)<=0||""===e.pair?(0,o.jsx)(p.Z,{onClick:function(){return null},color:"disabled",children:"Create pool"}):G&&e.pair===S.STABLE&&e.firstTokenAmount&&e.secondTokenAmount&&e.firstTokenAmount!==e.secondTokenAmount?(0,o.jsx)(p.Z,{onClick:function(){return null},color:"disabled",children:"Enter the same amount for both tokens"}):G&&(e.firstTokenAmount&&e.firstTokenAmount>Number(null===(n=e.userBalances[e.tokenIn.name])||void 0===n?void 0:n.balance)||(e.secondTokenAmount&&e.secondTokenAmount)>Number(null===(t=e.userBalances[e.tokenOut.name])||void 0===t?void 0:t.balance))?(0,o.jsx)(p.Z,{onClick:function(){return null},color:"disabled",children:"Insufficient balance"}):(0,o.jsx)(p.Z,{color:"primary",onClick:function(){return e.setShowConfirmPool(!0)},children:"Create pool"}):(0,o.jsx)(p.Z,{onClick:V,color:"primary",children:"Connect wallet"})}),[e.pair,e.tokenIn,e.tokenOut,e.feeTier,e.firstTokenAmount,e.secondTokenAmount,e.userBalances]),re=function(){var n=I(a().mark((function n(t,r){var o,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.feeTier!==g.Bj.NONE&&e.userMinPrice&&e.userMaxPrice&&(e.curPrice||e.userCurPrice)){n.next=3;break}return window.alert("please select range!"),n.abrupt("return");case 3:if(!((o=e.curPrice?e.curPrice:e.userCurPrice)<=e.userMinPrice||o>=e.userMaxPrice||e.userMinPrice>e.userMaxPrice)){n.next=7;break}return window.alert("please select range correctly!"),n.abrupt("return");case 7:if("."!=t){n.next=11;break}return e.setSecondTokenAmount("0."),e.setFirstTokenAmount("0."),n.abrupt("return");case 11:if(""!==t&&!isNaN(Number(t))){n.next=16;break}return"tokenIn"===r?e.setFirstTokenAmount(""):"tokenOut"===r&&e.setSecondTokenAmount(""),n.abrupt("return");case 16:"tokenIn"===r?(new m.O(t).decimalPlaces(),e.setFirstTokenAmount(t),s=(0,g.ye)(e.tokenInOp,e.tokenOutOp,t,!0,e.userMinPrice,e.userMaxPrice,e.curPrice,e.userCurPrice),e.setSecondTokenAmount(s.output),e.setTickLower(s.tickLower),e.setTickUpper(s.tickUpper),e.setCurSqrt(new m.O(s.currentSqrt.toString()))):"tokenOut"===r&&(new m.O(t).decimalPlaces(),e.setSecondTokenAmount(t.toString().trim()),i=(0,g.ye)(e.tokenInOp,e.tokenOutOp,t,!1,e.userMinPrice,e.userMaxPrice,e.curPrice,e.userCurPrice),e.setFirstTokenAmount(i.output),e.setTickLower(i.tickLower),e.setTickUpper(i.tickUpper),e.setCurSqrt(new m.O(i.currentSqrt.toString())));case 17:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border rounded-2xl border-text-800 bg-card-200 px-[10px] md:px-3.5 pt-4 pb-4 mb-3",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"border flex border-text-800/[0.5] rounded-2xl h-[88px]",children:[(0,o.jsxs)("div",{className:"w-[50%] rounded-l-2xl border-r items-center flex border-text-800/[0.5] bg-card-300 cursor-pointer",onClick:function(){return e.handleTokenType("tokenIn")},children:[(0,o.jsx)("div",{className:"ml-2 md:ml-5 -mb-1",children:(0,o.jsx)("img",{src:e.tokenIn.image?O.N[e.tokenIn.name]?O.N[e.tokenIn.name].src:(null===(n=z[e.tokenIn.name.toString()])||void 0===n?void 0:n.iconUrl)?z[e.tokenIn.name.toString()].iconUrl:"/assets/Tokens/fallback.png":"/assets/icon/emptyIcon.svg",className:"tokenIconLiq",width:"42px",height:"42px",onError:y.hj})}),(0,o.jsxs)("div",{className:"ml-1 md:ml-2",children:[(0,o.jsx)("p",{className:"text-text-900 font-body2",children:"Input"}),(0,o.jsxs)("p",{className:"font-caption1 md:font-title2 text-white",children:[e.tokenIn.name?(0,y.Xf)(e.tokenIn.name):"Select",(0,o.jsx)("span",{className:"relative ml-2 -top-[1.5px]",children:(0,o.jsx)(i(),{alt:"alt",className:"rotate-180",src:u.Z})})]})]})]}),(0,o.jsxs)("div",{className:"pl-[10px] md:pl-[25px] w-[100%] pr-2 md:pr-[18px] items-center flex bg-muted-200/[0.1]",children:[(0,o.jsxs)("div",{className:"w-0 flex-auto",children:[(0,o.jsx)("p",{children:(0,o.jsx)("input",{type:"text",className:"text-white bg-muted-200/[0.1] text-left border-0 font-input-text md:font-medium1 outline-none w-[100%] placeholder:text-text-400",value:(0,N.Z)(e.firstTokenAmount).toString().trim(),placeholder:"0.0",onChange:function(e){return re(e.target.value,"tokenIn")}})}),(0,o.jsx)("p",{children:(0,o.jsxs)("span",{className:"mt-2 ml-1 font-body2 md:font-body4 text-text-400",children:[" ","~$",e.firstTokenAmount&&q[e.tokenIn.name]?Number(Number(e.firstTokenAmount)*Number(q[e.tokenIn.name])).toFixed(2):"0.00"]})})]}),G&&e.tokenIn.name&&(0,o.jsxs)("div",{className:" border border-text-800/[0.5] rounded-lg bg-cardBackGround h-[36px] md:h-[48px] items-center flex px-2 md:px-3 ml-auto",children:[(0,o.jsx)("div",{className:"relative top-0.5 md:top-0",children:(0,o.jsx)(i(),{alt:"alt",src:f.Z,className:"walletIcon"})}),(0,o.jsxs)("div",{className:"ml-1 flex cursor-pointer text-primary-white font-caption1-small md:font-body2",onClick:function(){var n,t;"tez"===e.tokenIn.name?re(Number(null===(n=e.userBalances[e.tokenIn.name])||void 0===n?void 0:n.balance)-.02,"tokenIn"):re(null===(t=e.userBalances[e.tokenIn.name])||void 0===t?void 0:t.balance.toNumber(),"tokenIn")},children:[Number(null===(t=e.userBalances[e.tokenIn.name])||void 0===t?void 0:t.balance)>=0||Number(null===(r=e.contractTokenBalance[e.tokenIn.name])||void 0===r?void 0:r.balance)>=0?(0,o.jsxs)("span",{className:"mr-1",children:[Number(null===(s=e.userBalances[e.tokenIn.name])||void 0===s?void 0:s.balance)>0?new m.O(null===(j=e.userBalances[e.tokenIn.name])||void 0===j?void 0:j.balance).isLessThan(.01)?"<0.01":(0,y.ZP)(new m.O(null===(T=e.userBalances[e.tokenIn.name])||void 0===T?void 0:T.balance)):e.contractTokenBalance[e.tokenIn.name]&&Number(null===(P=e.contractTokenBalance[e.tokenIn.name])||void 0===P?void 0:P.balance)>0?new m.O(null===(C=e.contractTokenBalance[e.tokenIn.name])||void 0===C?void 0:C.balance).isLessThan(.01)?"<0.01":(0,y.ZP)(new m.O(null===(B=e.contractTokenBalance[e.tokenIn.name])||void 0===B?void 0:B.balance)):"0.0"," "]}):(0,o.jsx)("p",{className:" w-8 mr-2 h-[16px] rounded animate-pulse bg-shimmer-100"}),(0,y.Xf)(e.tokenIn.name)]})]})]})]}),(0,o.jsx)("div",{className:"relative -top-[9px] left-[95px] md:left-[162.5px]",children:(0,o.jsx)(i(),{alt:"alt",src:d.Z,width:"24px",height:"24px"})}),(0,o.jsxs)("div",{className:"border -mt-[25px] flex border-text-800/[0.5] rounded-2xl h-[88px]",children:[(0,o.jsxs)("div",{className:"w-[50%] rounded-l-2xl border-r items-center flex border-text-800/[0.5] bg-card-300 cursor-pointer",onClick:function(){return e.handleTokenType("tokenOut")},children:[(0,o.jsx)("div",{className:"ml-2 md:ml-5 -mb-1",children:(0,o.jsx)("img",{src:e.tokenOut.image?O.N[e.tokenOut.name]?O.N[e.tokenOut.name].src:(null===(L=z[e.tokenOut.name.toString()])||void 0===L?void 0:L.iconUrl)?z[e.tokenOut.name.toString()].iconUrl:"/assets/Tokens/fallback.png":"/assets/icon/emptyIcon.svg",className:"tokenIconLiq",width:"42px",height:"42px",onError:y.hj})}),(0,o.jsxs)("div",{className:"ml-1 md:ml-2",children:[(0,o.jsx)("p",{className:"text-text-900 font-body2",children:"Input"}),(0,o.jsxs)("p",{className:"font-caption1 md:font-title2 text-white",children:[e.tokenOut.name?(0,y.Xf)(e.tokenOut.name):"Select",(0,o.jsx)("span",{className:"relative ml-2 -top-[1.5px]",children:(0,o.jsx)(i(),{alt:"alt",className:"rotate-180",src:u.Z})})]})]})]}),(0,o.jsxs)("div",{className:"pl-[10px] md:pl-[25px] w-[100%] pr-2 md:pr-[18px] items-center flex bg-muted-200/[0.1]",children:[(0,o.jsxs)("div",{className:"w-0 flex-auto",children:[(0,o.jsx)("p",{children:(0,o.jsx)("input",{type:"text",value:(0,N.Z)(e.secondTokenAmount),className:"text-white bg-muted-200/[0.1] text-left border-0 font-input-text md:font-medium1 outline-none w-[100%] placeholder:text-text-400",placeholder:"0.0",onChange:function(e){return re(e.target.value,"tokenOut")}})}),(0,o.jsx)("p",{children:(0,o.jsxs)("span",{className:"mt-2 ml-1 font-body2 md:font-body4 text-text-400",children:["~$",e.secondTokenAmount&&q[e.tokenOut.name]?Number(Number(e.secondTokenAmount)*Number(q[e.tokenOut.name])).toFixed(2):"0.00"]})})]}),G&&e.tokenOut.name&&(0,o.jsxs)("div",{className:"ml-auto border border-text-800/[0.5] rounded-lg bg-cardBackGround h-[36px] md:h-[48px] items-center flex px-2 md:px-3",children:[(0,o.jsx)("div",{className:"relative top-0.5 md:top-0",children:(0,o.jsx)(i(),{alt:"alt",src:f.Z,className:"walletIcon"})}),(0,o.jsxs)("div",{className:"ml-1 cursor-pointer flex text-primary-white font-caption1-small md:font-body2",onClick:function(){var n,t;"tez"===e.tokenOut.name?re(Number(null===(n=e.userBalances[e.tokenOut.name])||void 0===n?void 0:n.balance)-.02,"tokenOut"):re(null===(t=e.userBalances[e.tokenOut.name])||void 0===t?void 0:t.balance.toNumber(),"tokenOut")},children:[Number(null===(Z=e.userBalances[e.tokenOut.name])||void 0===Z?void 0:Z.balance)>=0||Number(null===(E=e.contractTokenBalance[e.tokenOut.name])||void 0===E?void 0:E.balance)>=0?(0,o.jsxs)("span",{className:"mr-1",children:[Number(null===(F=e.userBalances[e.tokenOut.name])||void 0===F?void 0:F.balance)>0?new m.O(null===(M=e.userBalances[e.tokenOut.name])||void 0===M?void 0:M.balance).isLessThan(.01)?"<0.01":(0,y.ZP)(new m.O(null===(U=e.userBalances[e.tokenOut.name])||void 0===U?void 0:U.balance)):e.contractTokenBalance[e.tokenOut.name]&&Number(null===(_=e.contractTokenBalance[e.tokenOut.name])||void 0===_?void 0:_.balance)>0?new m.O(null===(R=e.contractTokenBalance[e.tokenOut.name])||void 0===R?void 0:R.balance).isLessThan(.01)?"<0.01":(0,y.ZP)(new m.O(null===(K=e.contractTokenBalance[e.tokenOut.name])||void 0===K?void 0:K.balance)):"0.0"," "]}):(0,o.jsx)("p",{className:" w-6 mr-2 h-[16px] rounded animate-pulse bg-shimmer-100"}),(0,y.Xf)(e.tokenOut.name)]})]})]})]})]})}),X&&(0,o.jsxs)("div",{className:"h-[46px] px-2 rounded-lg my-3 flex items-center bg-info-500/[0.1]",children:[(0,o.jsx)("p",{className:"relative top-0.5",children:(0,o.jsx)(i(),{src:c.Z})}),(0,o.jsx)("p",{className:"font-body2 text-info-500 px-3 md:w-auto w-[249px]",children:ee?"There is already a pool and gauge for the tokens selected.":" There is already a pool for the tokens selected."}),(0,o.jsx)("p",{className:"ml-auto relative top-[0px] bg-info-500/[0.1] text-info-500 cursor-pointer font-body2 rounded-[6px] px-3 py-2 h-[34px]",onClick:function(){return e.setShowLiquidityModal(!0)},children:"Manage"})]}),(0,o.jsx)("div",{className:"",children:te}),e.showLiquidityModal&&(0,o.jsx)(v._,{tokenIn:e.tokenIn,tokenOut:e.tokenOut,closeFn:e.setShowLiquidityModal,showLiquidityModal:e.showLiquidityModal,setActiveState:D,activeState:$,isGaugeAvailable:X&&ee,setShowLiquidityModalPopup:e.setShowLiquidityModalPopup})]})}},43327:function(e,n,t){var r=t(85893),a=t(3556),o=t(87547),s=t(25675),i=t.n(s),l=t(88794),c=t(66850),u=t(47546),d=t(67294),m=t(86010),p=t(23363),f=t(72588),x=t(12982),h=t(4126),k=t(45459),b=t(62210),v=t(34362),w=t(26038);function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){O(e,n,t[n])}))}return e}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.Z=function(e){var n=(0,b.CG)((function(e){return e.wallet.address})),t=(0,d.useRef)(null),s=(0,b.CG)((function(e){return e.config.tokens})),y=(0,d.useState)([]),O=y[0],j=y[1],T=(0,d.useState)({}),I=T[0],A=T[1];(0,d.useEffect)((function(){(0,f.Fh)().then((function(e){A(e.topTokens)}))}),[]);var S=(0,d.useMemo)((function(){return Object.entries(I).map((function(e){return{name:e[0],image:"/assets/Tokens/".concat(e[0],".png"),interface:s[e[0]]}}))}),[I]),P=(0,d.useCallback)((function(n){var t;return 0===e.searchQuery.length||n.name.toLowerCase().includes(e.searchQuery.trim().toLowerCase())||(null===(t=n.address)||void 0===t?void 0:t.toLowerCase().includes(e.searchQuery.trim().toLowerCase()))||"xtz"===e.searchQuery.toLowerCase()&&n.name.toLowerCase().search(/\btez\b/)>=0}),[e.searchQuery]),C=(0,d.useState)({}),B=C[0],L=C[1];return(0,d.useMemo)((function(){!function(){var t=e.tokens.filter(P).map((function(e){return N({},e)}));0===t.length?""!==e.searchQuery&&e.searchQuery.length>8&&e.show&&(0,x.n)(e.searchQuery.trim()).then((function(t){if(0!==t.allTokensList.length){e.show&&(0,k.b1)(t.allTokensList,n).then((function(e){L(e.allTokensBalances)}));var r=t.allTokensList.map((function(e){return{name:e.symbol,image:e.iconUrl?e.iconUrl.toString():u.Z,address:"",chainType:h.qo.TEZOS,interface:e}}));j(r)}else j([])})):""!==e.searchQuery&&e.searchQuery.length>8?e.show&&(0,x.n)(e.searchQuery.trim()).then((function(r){if(0!==r.allTokensList.length){e.show&&(0,k.b1)(r.allTokensList,n).then((function(e){L(e.allTokensBalances)}));var a=r.allTokensList.map((function(e){return{name:e.symbol,image:e.iconUrl?e.iconUrl.toString():u.Z,address:"",chainType:h.qo.TEZOS,interface:e}})),o=Array.from(new Set(g(t).concat(g(function(e,n){var t=[];return e.length>=n.length?e.filter((function(e){var r=0;n.filter((function(n){n.name.includes(e.name)&&(r=1)})),0==r&&t.push(e)})):n.filter((function(n){var r=0;e.filter((function(e){e.name.includes(n.name)&&(r=1)})),0==r&&t.push(n)})),t}(a,t)))));j(o)}else j(t)})):j(t)}()}),[e.tokens,e.searchQuery,P]),e.show?(0,r.jsx)(a.H,{title:"Select Tokenaaa",onhide:e.onhide,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)(o.Z,{inputRef:t,value:e.searchQuery,onChange:function(n){return e.setSearchQuery(n.target.value)}})}),(0,r.jsxs)("div",{className:"text-text-400 mt-[20px] font-body1",children:["Common base",(0,r.jsx)("span",{className:"relative top-0.5 ml-[5px]",children:(0,r.jsx)(p.eE,{id:"tooltipH",position:p.Ly.top,toolTipChild:(0,r.jsx)("div",{className:"w-[200px]",children:"These tokens are commonly paired with other tokens"}),children:(0,r.jsx)(i(),{alt:"alt",src:l.Z,className:"cursor-pointer"})})})]}),(0,r.jsx)("div",{className:"flex flex-wrap mt-1",children:S.map((function(n,t){var a;if("XTZ"!==n.name)return(0,r.jsxs)("div",N({className:(0,m.default)("border mr-2 mt-2 flex items-center border-text-800 px-2.5 py-1 rounded-[31px] h-[34px] bg-card-100",e.tokenIn.name===n.name||e.tokenOut.name===n.name?"cursor-not-allowed":"cursor-pointer")},e.tokenIn.name===n.name||e.tokenOut.name===n.name?{}:{onClick:function(){return e.selectToken(n)}},{children:[(0,r.jsxs)("span",{className:"w-[18px] h-[18px] relative top-0",children:[(0,r.jsx)("img",{alt:"alt",src:w.N[n.name]?w.N[n.name].src:(null===(a=s[n.name.toString()])||void 0===a?void 0:a.iconUrl)?s[n.name.toString()].iconUrl:"/assets/Tokens/fallback.png",width:"18px",height:"18px",onError:v.hj})," "]}),(0,r.jsx)("span",{className:"font-body3 ml-1",children:(0,v.Xf)(n.name)})]}),t)}))}),0===Object.keys(O).length?(0,r.jsx)("div",{className:"border h-[300px] border-text-800 bg-muted-200 rounded-xl flex justify-center items-center px-[18px] w-full pb-5 mt-5 font-body4 text-white",children:"No Tokens found"}):(0,r.jsx)("div",{id:"tokensList",className:"border relative max-h-[300px] h-[300px] modal overflow-y-auto border-text-800 bg-muted-200 rounded-xl w-full pb-5 mt-5",children:O.map((function(n,t){var a,o,i,l,u,d,f,x,h;return(0,r.jsxs)("div",N({className:(0,m.default)(" flex content-center  px-[18px] hover:bg-card-100 py-2",e.tokenIn.name===n.name||e.tokenOut.name===n.name?"cursor-not-allowed":"cursor-pointer")},e.tokenIn.name===n.name||e.tokenOut.name===n.name?{}:{onClick:function(){return e.selectToken(n)}},{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:"w-[30px] h-[30px] relative top-1",children:[(0,r.jsx)("img",{alt:"alt",src:w.N[n.name.toString()]?w.N[n.name.toString()].src:(null===(o=s[null===(a=n.name)||void 0===a?void 0:a.toString()])||void 0===o?void 0:o.iconUrl)?s[n.name.toString()].iconUrl:n.image?n.image:"/assets/Tokens/fallback.png",width:"30px",height:"30px",onError:v.hj})," "]})}),(0,r.jsxs)("div",{className:"ml-2",children:[(0,r.jsx)("div",{className:"font-body1 text-text-100/[0.2]",children:n.chainType}),(0,r.jsx)("div",{className:(0,m.default)("font-subtitle4 ",e.tokenIn.name===n.name||e.tokenOut.name===n.name?"text-white/[0.1]":"text-white"),children:(0,v.Xf)(n.name)})]}),(B[n.name]||e.allBalance[n.name])&&e.isLoading?(0,r.jsx)("div",{className:"font-subtitle4 cursor-pointer ml-auto mt-[7px]",children:(0,r.jsx)(p.eE,{position:p.Ly.top,message:(null===(i=e.allBalance[n.name])||void 0===i?void 0:i.balance)?(0,c.Z)(null===(l=e.allBalance[n.name])||void 0===l?void 0:l.balance.toString()):B[n.name]?(0,c.Z)(null===(u=B[n.name])||void 0===u?void 0:u.balance.toString()):"0",disable:0===Number(null===(d=e.allBalance[n.name])||void 0===d?void 0:d.balance),children:(null===(f=e.allBalance[n.name])||void 0===f?void 0:f.balance)?null===(x=e.allBalance[n.name])||void 0===x?void 0:x.balance.toFixed(2):B[n.name]?null===(h=B[n.name])||void 0===h?void 0:h.balance.toFixed(2):0})}):!1===e.isLoading?(0,r.jsx)("div",{className:"font-subtitle4 ml-auto mt-[7px]",children:"0"}):(0,r.jsx)("div",{className:" ml-auto h-[19px] rounded animate-pulse bg-shimmer-100 text-shimmer-100 mt-[7px]",children:"9999"})]}),t)}))})]})}):null}},87547:function(e,n,t){var r=t(85893),a=t(86010),o=t(67294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){var n=(0,o.useState)(!1),t=n[0],i=n[1];return(0,r.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}({className:(0,a.default)("    rounded font-body3 text-white w-full h-[50px] py-3.5 px-3 hover:border-text-700",e.value?"border border-primary-500 bg-outineBtn hover:border-primary-500":"border border-text-800/[0.5]",!t&&e.value&&"border-0 bg-outineBtn")},e,{children:(0,r.jsx)("input",{ref:e.inputRef,autoFocus:!0,className:"bg-transprent relative top-[1px] w-full font-body3 outline-none placeholder:text-text-700",placeholder:"Search name or paste address",onChange:e.onChange,value:e.value,onFocus:function(){return i(!0)},onBlur:function(){return i(!1)}})}))}},1255:function(e,n,t){t.d(n,{Gz:function(){return v},NC:function(){return w},rf:function(){return k},vM:function(){return b}});var r=t(34051),a=t.n(r),o=t(11693),s=t(9133),i=t(4126),l=t(62210),c=t(37837),u=t(4118),d=t(70794),m=t(80900);function p(e,n,t,r,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void t(c)}i.done?n(l):Promise.resolve(l).then(r,a)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){p(o,r,a,s,i,"next",e)}function i(e){p(o,r,a,s,i,"throw",e)}s(void 0)}))}}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}var k=function(){var e=f(a().mark((function e(n,t,r,i,u,p,f,x,k,b,v,w,y,O,N,g){var j,T,I,A,S,P,C,B,L,Z;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j=(0,s.vu)().CheckIfWalletConnected,e.next=4,j();case 4:if(e.sent.success){e.next=7;break}throw new Error("Wallet connection failed");case 7:return e.next=9,(0,s.vu)().tezos();case 9:return T=e.sent,e.next=12,T.wallet.at(s.Kj);case 12:return I=e.sent,e.next=15,T.wallet.at(n.address);case 15:return A=e.sent,e.next=18,T.wallet.at(t.address);case 18:return S=e.sent,P=[],i||(P.push(h({kind:o.OpKind.TRANSACTION},I.methods.createPoolIfNecessary("fa12",n.address,"fa12",t.address,r).toTransferParams())),P.push(h({kind:o.OpKind.TRANSACTION},I.methods.initializePoolIfNecessary("fa12",n.address,"fa12",t.address,r,w).toTransferParams()))),console.log("[prince] deployV3Pool: token1Amount",x),console.log("[prince] deployV3Pool: token2Amount",k),P.push(h({kind:o.OpKind.TRANSACTION},A.methods.approve(s.Kj,new d.O(x).multipliedBy(new d.O(10).pow(n.decimals))).toTransferParams())),P.push(h({kind:o.OpKind.TRANSACTION},S.methods.approve(s.Kj,new d.O(k).multipliedBy(new d.O(10).pow(t.decimals))).toTransferParams())),P.push(h({kind:o.OpKind.TRANSACTION},I.methods.mint("fa12",n.address,"fa12",t.address,r,u,p,new d.O(x).multipliedBy(new d.O(10).pow(n.decimals)),new d.O(k).multipliedBy(new d.O(10).pow(t.decimals)),0,0,f,new Date(Date.now()+1e6).toISOString()).toTransferParams())),e.next=28,(0,m.lI)(P);case 28:return C=e.sent,B=T.wallet.batch(C),e.next=32,B.send();case 32:return L=e.sent,N&&N(!1),O&&O(),y&&y(L.opHash),g&&l.h.dispatch((0,c.XV)(g)),e.next=39,L.confirmation(1);case 39:return e.next=41,L.status();case 41:if("applied"!==(Z=e.sent)){e.next=46;break}return e.abrupt("return",{success:!0,operationId:L.opHash});case 46:throw new Error(Z);case 47:e.next=53;break;case 49:return e.prev=49,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1,operationId:void 0,error:e.t0.message});case 53:case"end":return e.stop()}}),e,null,[[0,49]])})));return function(n,t,r,a,o,s,i,l,c,u,d,m,p,f,x,h){return e.apply(this,arguments)}}(),b=function(){var e=f(a().mark((function e(n,t,r,p,f,x,k,b,v){var w,y,O,N,g,j,T,I,A,S,P,C,B,L;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w=(0,s.vu)().CheckIfWalletConnected,e.next=4,w();case 4:if(e.sent.success){e.next=7;break}throw new Error("Wallet connection failed");case 7:return e.next=9,(0,s.vu)().tezos();case 9:return y=e.sent,e.next=12,y.wallet.at(s.YE);case 12:return O=e.sent,e.next=15,y.wallet.at(n.address);case 15:return N=e.sent,e.next=18,y.wallet.at(t.address);case 18:return g=e.sent,j=[],n.standard===i.Yn.FA12?j.push(h({kind:o.OpKind.TRANSACTION},N.methods.transfer(r,s.o0,p.multipliedBy(new d.O(10).pow(n.decimals))).toTransferParams())):n.standard===i.Yn.FA2&&j.push(h({kind:o.OpKind.TRANSACTION},N.methods.transfer([{from_:r,txs:[{to_:s.o0,token_id:null!==(T=n.tokenId)&&void 0!==T?T:0,amount:p.multipliedBy(new d.O(10).pow(n.decimals))}]}]).toTransferParams())),t.standard===i.Yn.FA12?j.push(h({kind:o.OpKind.TRANSACTION},g.methods.transfer(r,s.o0,f.multipliedBy(new d.O(10).pow(t.decimals))).toTransferParams())):t.standard===i.Yn.FA2&&j.push(h({kind:o.OpKind.TRANSACTION},g.methods.transfer([{from_:r,txs:[{to_:s.o0,token_id:null!==(I=t.tokenId)&&void 0!==I?I:0,amount:f.multipliedBy(new d.O(10).pow(t.decimals))}]}]).toTransferParams())),j.push(h({kind:o.OpKind.TRANSACTION},O.methods.deployVolatilePair(n.address,p.multipliedBy(new d.O(10).pow(n.decimals)),null!==(A=n.tokenId)&&void 0!==A?A:0,n.standard===i.Yn.FA2,t.address,f.multipliedBy(new d.O(10).pow(t.decimals)),null!==(S=t.tokenId)&&void 0!==S?S:0,t.standard===i.Yn.FA2,(0,u.iF)("".concat(n.symbol,"-").concat(t.symbol," PNLP")),r).toTransferParams())),e.next=26,(0,m.lI)(j);case 26:return P=e.sent,C=y.wallet.batch(P),e.next=30,C.send();case 30:return B=e.sent,b&&b(!1),k&&k(),x&&x(B.opHash),v&&l.h.dispatch((0,c.XV)(v)),e.next=37,B.confirmation(1);case 37:return e.next=39,B.status();case 39:if("applied"!==(L=e.sent)){e.next=44;break}return e.abrupt("return",{success:!0,operationId:B.opHash});case 44:throw new Error(L);case 45:e.next=51;break;case 47:return e.prev=47,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1,operationId:void 0,error:e.t0.message});case 51:case"end":return e.stop()}}),e,null,[[0,47]])})));return function(n,t,r,a,o,s,i,l,c){return e.apply(this,arguments)}}(),v=function(){var e=f(a().mark((function e(n,t,r,p,f,x,k,b,v){var w,y,O,N,g,j,T,I,A,S,P,C,B,L,Z,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w=(0,s.vu)().CheckIfWalletConnected,e.next=4,w();case 4:if(e.sent.success){e.next=7;break}throw new Error("Wallet connection failed");case 7:return e.next=9,(0,s.vu)().tezos();case 9:return y=e.sent,e.next=12,y.wallet.at(s.YE);case 12:return O=e.sent,e.next=15,y.wallet.at(n.address);case 15:return N=e.sent,e.next=18,y.wallet.at(t.address);case 18:return g=e.sent,j=[],n.standard===i.Yn.FA12?j.push(h({kind:o.OpKind.TRANSACTION},N.methods.transfer(r,s.o0,p.multipliedBy(new d.O(10).pow(n.decimals))).toTransferParams())):n.standard===i.Yn.FA2&&j.push(h({kind:o.OpKind.TRANSACTION},N.methods.transfer([{from_:r,txs:[{to_:s.o0,token_id:null!==(T=n.tokenId)&&void 0!==T?T:0,amount:p.multipliedBy(new d.O(10).pow(n.decimals))}]}]).toTransferParams())),t.standard===i.Yn.FA12?j.push(h({kind:o.OpKind.TRANSACTION},g.methods.transfer(r,s.o0,f.multipliedBy(new d.O(10).pow(t.decimals))).toTransferParams())):t.standard===i.Yn.FA2&&j.push(h({kind:o.OpKind.TRANSACTION},g.methods.transfer([{from_:r,txs:[{to_:s.o0,token_id:null!==(I=t.tokenId)&&void 0!==I?I:0,amount:f.multipliedBy(new d.O(10).pow(t.decimals))}]}]).toTransferParams())),n.decimals<=t.decimals?(S=1,A=Math.pow(10,t.decimals-n.decimals)):(A=1,S=Math.pow(10,n.decimals-t.decimals)),j.push(h({kind:o.OpKind.TRANSACTION},O.methods.deployStablePair(n.address,p.multipliedBy(new d.O(10).pow(n.decimals)),null!==(P=n.tokenId)&&void 0!==P?P:0,A,n.standard===i.Yn.FA2,t.address,f.multipliedBy(new d.O(10).pow(t.decimals)),null!==(C=t.tokenId)&&void 0!==C?C:0,S,t.standard===i.Yn.FA2,(0,u.iF)("".concat(n.symbol,"-").concat(t.symbol," PNLP")),r).toTransferParams())),e.next=29,(0,m.lI)(j);case 29:return B=e.sent,L=y.wallet.batch(B),e.next=33,L.send();case 33:return Z=e.sent,b&&b(!1),k&&k(),x&&x(Z.opHash),v&&l.h.dispatch((0,c.XV)(v)),e.next=40,Z.confirmation(1);case 40:return e.next=42,Z.status();case 42:if("applied"!==(E=e.sent)){e.next=47;break}return e.abrupt("return",{success:!0,operationId:Z.opHash});case 47:throw new Error(E);case 48:e.next=54;break;case 50:return e.prev=50,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1,operationId:void 0,error:e.t0.message});case 54:case"end":return e.stop()}}),e,null,[[0,50]])})));return function(n,t,r,a,o,s,i,l,c){return e.apply(this,arguments)}}(),w=function(){var e=f(a().mark((function e(n,t,r,p,f,x,k,b,v){var w,y,O,N,g,j,T,I,A,S,P,C,B;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y=new d.O(0),N=new d.O(0),g=(0,s.vu)().CheckIfWalletConnected,e.next=5,g();case 5:if(e.sent.success){e.next=8;break}throw new Error("Wallet connection failed");case 8:return e.next=10,(0,s.vu)().tezos();case 10:if(j=e.sent,"XTZ"!==n.symbol){e.next=15;break}w=n,y=p,O=t,N=f,e.next=20;break;case 15:if("XTZ"!==t.symbol){e.next=19;break}w=t,y=f,O=n,N=p,e.next=20;break;case 19:throw new Error("Tez pair expected, but found none");case 20:return y=y.multipliedBy(new d.O(10).pow(w.decimals)).decimalPlaces(0,1),N=N.multipliedBy(new d.O(10).pow(O.decimals)).decimalPlaces(0,1),e.next=24,j.wallet.at(s.H6);case 24:return T=e.sent,e.next=27,j.wallet.at(O.address);case 27:if(I=e.sent,A=[],O.standard!==i.Yn.FA12){e.next=33;break}A.push(h({kind:o.OpKind.TRANSACTION},I.methods.transfer(r,s.o0,N).toTransferParams())),e.next=38;break;case 33:if(O.standard!==i.Yn.FA2){e.next=37;break}A.push(h({kind:o.OpKind.TRANSACTION},I.methods.transfer([{from_:r,txs:[{to_:s.o0,token_id:O.tokenId||0,amount:N}]}]).toTransferParams())),e.next=38;break;case 37:throw new Error("Invalid token standard");case 38:return A.push(h({kind:o.OpKind.TRANSACTION},T.methods.deployTezPair(y,O.address,N,O.tokenId||0,(0,u.iF)("".concat(O.symbol,"-").concat(w.symbol," PNLP")),O.standard===i.Yn.FA2,r).toTransferParams({mutez:!0,amount:y.toNumber()}))),e.next=41,(0,m.lI)(A);case 41:return S=e.sent,P=j.wallet.batch(S),e.next=45,P.send();case 45:return C=e.sent,b&&b(!1),k&&k(),x&&x(C.opHash),v&&l.h.dispatch((0,c.XV)(v)),e.next=52,C.confirmation(1);case 52:return e.next=54,C.status();case 54:if("applied"!==(B=e.sent)){e.next=59;break}return e.abrupt("return",{success:!0,operationId:C.opHash});case 59:throw new Error(B);case 60:e.next=66;break;case 62:return e.prev=62,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1,operationId:void 0,error:e.t0.message});case 66:case"end":return e.stop()}}),e,null,[[0,62]])})));return function(n,t,r,a,o,s,i,l,c){return e.apply(this,arguments)}}()}}]);