(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5304],{95304:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var a=t(85893),r=t(67263),s=t.n(r),i=t(67294),o=t(13778),c=t(86010),u=t(30594),l=t(7736),m=t(97468),f=t(45459),d=t(40049),p=t(62210),g=t(70794),O=t(49373),h=t(72588),k=t(4126),S=t(53447),w=t(12982);function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,s=[],i=!0,o=!1;try{for(t=t.call(e);!(i=(a=t.next()).done)&&(s.push(a.value),!n||s.length!==n);i=!0);}catch(c){o=!0,r=c}finally{try{i||null==t.return||t.return()}finally{if(o)throw r}}return s}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return b(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){(0,p.CG)((function(e){return e.config.tokens}));var n=(0,p.CG)((function(e){return e.tokenPrice.tokenPrice})),t=(0,p.CG)((function(n){return n.userSettings.settings[e.otherProps.walletAddress?e.otherProps.walletAddress:""]?n.userSettings.settings[e.otherProps.walletAddress?e.otherProps.walletAddress:""]:n.userSettings.settings[""]})),r=(0,p.CG)((function(e){return e.config.tokens})),b=(0,p.CG)((function(e){return e.wallet.address})),L=Object.entries(r),P=(0,u.T)(),v=P.tokenIn,I=P.setTokenIn,j=P.tokenOut,A=P.setTokenOut,x=(0,i.useState)({}),C=x[0],R=x[1],B=(0,i.useState)(""),E=B[0],F=B[1],N=(0,i.useState)(""),M=N[0],_=N[1],D=(0,i.useState)(!1),G=D[0],U=D[1],H=(0,i.useState)(!1),W=H[0],Z=H[1],Q=(0,i.useState)(!1),V=Q[0],Y=Q[1],q=(0,i.useState)(""),K=q[0],X=q[1],$=(0,i.useState)(!1),z=$[0],J=$[1],ee=(0,i.useState)("tokenIn"),ne=ee[0],te=ee[1],ae=(0,i.useState)(""),re=ae[0],se=ae[1],ie=(0,i.useState)(!1),oe=ie[0],ce=ie[1],ue=(0,i.useState)(Number(t.slippage)),le=ue[0],me=ue[1],fe=y(i.useState({}),2),de=fe[0],pe=fe[1],ge=y(i.useState({}),2),Oe=ge[0],he=ge[1],ke=(0,i.useState)(!1),Se=ke[0],we=ke[1],be=(0,i.useState)(""),Te=be[0],ye=be[1],Le=(0,i.useState)(t.multiHop),Pe=Le[0],ve=Le[1],Ie=i.useRef({isLoadingfirst:!1,isLoadingSecond:!1});(0,i.useEffect)((function(){""!==re&&re.length>8&&(0,w.n)(re.trim()).then((function(e){0!==e.allTokensList.length&&(0,f.b1)(e.allTokensList,b).then((function(e){R(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){T(e,n,t[n])}))}return e}({},C,e.allTokensBalances))}))}))}),[re,b]);var je=i.useRef({minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!1,exchangeRate:new g.O(0)}),Ae=i.useRef([]),xe=i.useRef([]),Ce=(0,i.useState)([]),Re=Ce[0],Be=Ce[1],Ee=i.useRef([]),Fe=i.useRef([]),Ne=i.useRef(!1),Me=(0,i.useState)({success:!1,allTokensBalances:{}}),_e=Me[0],De=Me[1];(0,i.useEffect)((function(){De({success:!1,allTokensBalances:{}}),b?(0,f.b1)(Object.values(r),b).then((function(e){De(e)})):De({success:!1,allTokensBalances:{}})}),[b,r,Se]),(0,i.useEffect)((function(){me(t.slippage),ve(t.multiHop)}),[e.otherProps.walletAddress,t]),(0,i.useEffect)((function(){0!==Object.keys(j).length&&""!==j.name&&0!==Object.keys(v).length&&""!==v.name&&(n[v.name]||n[j.name]?Ie.current={isLoadingfirst:!0,isLoadingSecond:!0}:Ie.current={isLoadingfirst:!1,isLoadingSecond:!1})}),[n]),(0,i.useEffect)((function(){Object.prototype.hasOwnProperty.call(v,"name")&&Object.prototype.hasOwnProperty.call(j,"name")&&""!==v.name&&""!==j.name&&(Ne.current||""!==E?0!==Number(E)&&(je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!0,exchangeRate:new g.O(0)}):Ie.current={isLoadingfirst:!0,isLoadingSecond:!0},(0,O.p2)(v.name,j.name,Pe).then((function(e){e&&(Ie.current={isLoadingfirst:!1,isLoadingSecond:!1},Ae.current=e.paths,0!==Ae.current.length?(Be(e.paths),Ee.current=e.swapData,ye("")):(ye(Pe?d.h.SWAPROUTER:d.h.SWAPMULTIHOP),Be([]),Ee.current=[],je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!1,exchangeRate:new g.O(0)},Ie.current={isLoadingfirst:!1,isLoadingSecond:!1}),""===E&&""===M||(Ie.current={isLoadingfirst:!1,isLoadingSecond:!1},!Ne.current&&_(""),!Ne.current&&Ge(E,"tokenIn")),(0,O.p2)(j.name,v.name,Pe).then((function(e){xe.current=e.paths,0!==xe.current.length?(Be(e.paths),Fe.current=e.swapData,ye("")):(Be([]),Fe.current=[])})))})))}),[v,j,ne,Pe,n,Ne.current,Se]);var Ge=function(e,n){Ne.current=!1;if("."!=e){if(0!==Object.keys(j).length?Ie.current={isLoadingSecond:!0,isLoadingfirst:!1}:je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!1,exchangeRate:new g.O(0)},console.log("[prince] handleSwapTokenInput"),""===e||isNaN(Number(e)))F(""),_(""),je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!1,exchangeRate:new g.O(0)},Ie.current={isLoadingSecond:!1,isLoadingfirst:!1};else if(0===Number(e))F(e.toString().trim()),je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!1,exchangeRate:new g.O(0)},Ie.current={isLoadingSecond:!1,isLoadingfirst:!1},_(e.toString().trim());else if("tokenIn"===n){F(e.toString().trim());new g.O(e).decimalPlaces();0!==Object.keys(j).length&&(Ie.current={isLoadingSecond:!0,isLoadingfirst:!1},_(0))}else if("tokenOut"===n){_(e.toString().trim());new g.O(e).decimalPlaces();0!==Object.keys(v).length&&F(0)}ye("")}else"tokenIn"===n?F("0."):_("0.")},Ue=function(){ce(!1),se("")},He=(0,i.useMemo)((function(){return L.map((function(e){var n,t;return{name:e[0],image:"/assets/Tokens/".concat(null===(n=e[1])||void 0===n?void 0:n.symbol,".png"),chainType:null===(t=e[1])||void 0===t?void 0:t.originChain,address:e[1].address,interface:e[1]}}))}),[r]);(0,i.useEffect)((function(){_e.success&&0!==Object.keys(_e.allTokensBalances).length&&He.sort((function(e,n){var t,a,r,s;return Number((null===(t=_e.allTokensBalances[n.name])||void 0===t?void 0:t.balance)?null===(a=_e.allTokensBalances[n.name])||void 0===a?void 0:a.balance:0)-Number((null===(r=_e.allTokensBalances[e.name])||void 0===r?void 0:r.balance)?null===(s=_e.allTokensBalances[e.name])||void 0===s?void 0:s.balance:0)}))}),[He,_e.allTokensBalances]);var We=(0,i.useState)(!1),Ze=(We[0],We[1],(0,i.useState)([{name:"name1",value:"value1"},{name:"name2",value:"value2"}]));Ze[0],Ze[1];return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:s().swap,children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)("div",{className:(0,c.default)("bg-card-500 md:border border-y border-text-800 my-[70px] lg:mt-[75px] md:rounded-3xl  text-white lg:w-640 pt-5 pb-2 mx-auto fade-in"),children:(0,a.jsx)(m.Z,{walletAddress:e.otherProps.walletAddress,firstTokenAmount:E,secondTokenAmount:M,connectWallet:e.otherProps.connectWallet,tokenIn:v,tokenOut:j,tokens:He,handleTokenType:function(e){we(!1),ce(!0),te(e)},setSlippage:me,slippage:le,handleClose:Ue,changeTokenLocation:function(){var e=M;F(e.toString()),Ne.current=!0,_(""),Object.prototype.hasOwnProperty.call(v,"name")&&Object.prototype.hasOwnProperty.call(j,"name")&&""!==v.name&&""!==j.name&&(Ie.current={isLoadingfirst:!1,isLoadingSecond:!0}),j.name&&v.name?(I({name:j.name,image:j.image}),A({name:v.name,image:v.image}),e>0?setTimeout((function(){je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!0,exchangeRate:new g.O(0)},Be([]);var t=(0,h.Sq)(Ae.current,new g.O(e),new g.O(le),Ee.current,n);je.current={minimumOut:t.finalMinimumTokenOut,minimumTokenOut:t.minimumTokenOut,feePerc:t.feePerc,isStable:t.isStable,path:t.path,finalFeePerc:t.finalFeePerc,priceImpact:t.finalPriceImpact,success:!0,exchangeRate:t.exchangeRate},t.tokenOutAmount.isLessThan(0)?ye(d.h.INSUFFICIENT_LIQUIDITY):ye(""),_(t.tokenOutAmount.isLessThan(0)?0:t.tokenOutAmount.toString()),Ie.current={isLoadingSecond:!1,isLoadingfirst:!1},_(t.tokenOutAmount.isLessThan(0)?0:t.tokenOutAmount.toString())}),2e3):(_(0),Ie.current={isLoadingSecond:!1,isLoadingfirst:!1})):0===Object.keys(j).length?(Ie.current={isLoadingfirst:!1,isLoadingSecond:!1},A({name:v.name,image:v.image}),I({})):0===Object.keys(v).length&&(Ie.current={isLoadingfirst:!1,isLoadingSecond:!1},I({name:j.name,image:j.image}),A({}))},setSecondTokenAmount:_,setFirstTokenAmount:F,handleSwapTokenInput:Ge,setTokenIn:I,setTokenOut:A,setTokenType:te,tokenPrice:n,recepient:K,setRecepient:X,setShowConfirmSwap:Z,showConfirmSwap:W,setV3ShowConfirmSwap:Y,v3ShowConfirmSwap:V,setShowConfirmTransaction:U,showConfirmTransaction:G,setShowTransactionSubmitModal:J,showTransactionSubmitModal:z,loading:Ie.current,resetAllValues:function(){F(""),_(""),Ge("","tokenIn"),je.current={minimumOut:new g.O(0),minimumTokenOut:[],feePerc:[],isStable:[],path:[],finalFeePerc:new g.O(0),priceImpact:new g.O(0),success:!1,exchangeRate:new g.O(0)}},routeDetails:je.current,allPath:Re,setErrorMessage:ye,errorMessage:Te,setEnableMultiHop:ve,enableMultiHop:Pe,setBalanceUpdate:we,isSwitchClicked:Ne.current,allBalance:_e,contractTokenBalance:C,tokenInOp:de,tokenOutOp:Oe})}),(0,a.jsx)(l.Z,{tokens:He.filter((function(e){return e.name.toLowerCase()!==k.kc.KODEX.toLowerCase()&&e.name.toLowerCase()!==k.kc.WRAP.toLowerCase()})),show:oe,isSuccess:_e.success,isLoading:_e.success,allBalance:_e.allTokensBalances,selectToken:function(e){Ne.current=!1,"tokenOut"!==ne&&"tokenIn"!==ne||""===E||(_(""),Ie.current={isLoadingfirst:!1,isLoadingSecond:!0}),"tokenIn"===ne?(I({name:e.name,image:e.image}),pe(e.interface),console.log("setTokenInOp interface",e.interface)):(A({name:e.name,image:e.image}),he(e.interface),console.log("setTokenOutOp interface",e.interface)),Ue()},onhide:Ue,tokenIn:v,tokenOut:j,tokenType:ne,searchQuery:re,setSearchQuery:se}),(0,a.jsx)(S.Z,{})]})})}},67263:function(e){e.exports={swap:"swap_swap__GymdY"}}}]);